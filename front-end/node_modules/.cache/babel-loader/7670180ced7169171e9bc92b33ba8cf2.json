{"ast":null,"code":"const initialState = [];\nexport const cart = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'ADD_PRODUCT':\n      const productExist = state.find(product => product.id === action.payload.id);\n\n      if (productExist) {\n        let newState = state.map(x => x.id === action.payload.id ? { ...x,\n          qty: x.qty + 1\n        } : x);\n        localStorage.setItem('products', JSON.stringify(newState));\n        localStorage.setItem('productsLength', JSON.stringify(newState.length));\n        state = JSON.parse(localStorage.getItem('products'));\n        return state.map(x => x.id === action.payload.id ? { ...x,\n          qty: x.qty + 1\n        } : x);\n        ;\n      } else {\n        const product = action.payload;\n        let newState = [...state, { ...product,\n          qty: 1\n        }];\n        localStorage.setItem('products', JSON.stringify(newState));\n        localStorage.setItem('productsLength', JSON.stringify(newState.length));\n        return newState;\n      }\n\n    case 'DELETE_PRODUCT':\n      const exist1 = state.find(x => x.id === action.payload.id);\n\n      if (exist1.qty === 1) {\n        let newState = state.filter(x => x.id !== exist1.id);\n        localStorage.setItem('products', JSON.stringify(newState));\n        localStorage.setItem('productsLength', JSON.stringify(newState.length));\n        return newState;\n      } else {\n        let newState = state.map(x => x.id === action.payload.id ? { ...x,\n          qty: x.qty - 1\n        } : x);\n        localStorage.setItem('products', JSON.stringify(newState));\n        localStorage.setItem('productsLength', JSON.stringify(newState.length));\n        return newState;\n      }\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/uzairjamil/Desktop/Development/Projects/React/e-commerce-app/front-end/src/redux/reducers.js"],"names":["initialState","cart","state","action","type","productExist","find","product","id","payload","newState","map","x","qty","localStorage","setItem","JSON","stringify","length","parse","getItem","exist1","filter"],"mappings":"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","sourcesContent":["const initialState = []\n\nexport const cart = (state = initialState, action) => {\n    switch(action.type){\n        case 'ADD_PRODUCT':\n            const productExist = state.find((product) => product.id === action.payload.id)\n            if(productExist){\n                let newState = state.map((x)=> x.id === action.payload.id ? {...x, qty: x.qty + 1} : x);\n                localStorage.setItem('products', JSON.stringify(newState))\n                localStorage.setItem('productsLength', JSON.stringify(newState.length))\n                state = JSON.parse(localStorage.getItem('products'))\n                return state.map((x)=> x.id === action.payload.id ? {...x, qty: x.qty + 1} : x);;\n            }else{\n                const product = action.payload;\n                let newState = [...state, { ...product, qty: 1, }]\n                localStorage.setItem('products', JSON.stringify(newState))\n                localStorage.setItem('productsLength', JSON.stringify(newState.length))\n                return newState\n            }\n            \n        \n        case 'DELETE_PRODUCT':\n            const exist1 = state.find((x)=> x.id === action.payload.id);\n            if(exist1.qty === 1){\n                let newState = state.filter((x)=> x.id !== exist1.id);\n                localStorage.setItem('products', JSON.stringify(newState))\n                localStorage.setItem('productsLength', JSON.stringify(newState.length))\n                return newState;\n            }else{\n                let newState = state.map((x)=> x.id === action.payload.id ? {...x, qty: x.qty-1} : x);\n                localStorage.setItem('products', JSON.stringify(newState))\n                localStorage.setItem('productsLength', JSON.stringify(newState.length))\n                return newState;\n            }\n            \n        default: \n            return state;\n    }\n}"]},"metadata":{},"sourceType":"module"}